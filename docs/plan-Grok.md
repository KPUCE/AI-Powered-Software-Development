# ApneaUltra 앱 제품 요구사항 문서 (PRD)

**문서 버전**: 1.0  
**작성일**: 2025년 10월 26일  
**작성자**: Grok (xAI) - 서비스 기획 문서 기반  
**제품 이름**: ApneaUltra (프리다이빙 전용 로그 앱)  
**개요**: 이 PRD는 Apple Watch Ultra 2와 iPhone과 연동된 프리다이빙 전용 모바일 앱 개발을 위한 요구사항을 정의합니다. 앱은 실시간 모니터링, 훈련, 로그, 분석 및 커뮤니티 기능을 프리다이버를 위해 특화하여 제공합니다. 기존 앱(예: Garmin Dive, Suunto Dive, Oceanic+)과 차별화되며, Apple 생태계 센서를 활용하여 안전과 성능 인사이트를 강조합니다.  

앱은 초보자부터 전문 프리다이버(18~45세, AIDA/SSI 인증 사용자)를 타겟으로 합니다. 비즈니스 모델: 무료 기본 버전 + 프리미엄 구독 ($4.99/월, 고급 기능 제공). MVP 범위: Apple Watch Ultra 2(실시간 추적) + iPhone(분석/소셜) 연동.

---

## 1. 기능적 요구사항

이 요구사항은 시스템이 수행해야 할 기능을 정의합니다. 사용자 흐름(준비 → 다이빙 → 로그 → 분석 → 공유/커뮤니티)으로 구성됩니다. 모든 기능은 오프라인 모드를 지원하며, Bluetooth/iCloud를 통해 자동 동기화됩니다.

### 1.1 준비/훈련 기능
- **아프네아 테이블 생성기**: 사용자가 CO2/O2 테이블을 개인 레벨(예: 호흡 유지 시간, 회복 간격)에 따라 생성/커스터마이징할 수 있어야 합니다. Apple HealthKit의 심박수 데이터를 활용하여 테이블을 생성합니다. 프리미엄: AI 기반 개인화(예: 과거 로그 기반 조정).
- **브레스 홀드 타이머**: 음성/진동 알림과 함께 워밍업 세션을 가이드합니다. 카운트다운, 유지 단계, 회복 프롬프트를 포함합니다. Watch 센서와 연동하여 실시간 심박수 피드백을 제공합니다.
- **날씨/사이트 추천**: GPS를 사용하여 사이트별 데이터(조류, 수온, 안전 팁)를 가져와 표시합니다. 외부 API(예: 날씨 서비스)를 통해 실시간 업데이트를 통합합니다.

### 1.2 실시간 다이빙 추적 기능
- **깊이/시간/심박수 모니터링**: 다이빙을 자동 감지(예: 압력 센서로 1m 이상 깊이)합니다. Watch에서 실시간 메트릭스(40m까지 깊이, 시간, 심박수)를 표시합니다. 심박수 임계값 기반 회복 시간 추천을 포함합니다.
- **안전 알림**: 깊이/시간/심박수 한계를 커스터마이징 가능한 알람(예: 3분 초과 시 진동)으로 제공합니다. 버디 모드: GPS를 통한 SOS 신호 및 위치 공유. 스텔스 모드: 다이빙 중 배터리 절약을 위해 화면/소리를 최소화합니다.
- **다이빙 감지 및 모드 전환**: 표면/다이빙 상태를 자동 전환합니다. 프리다이빙 특화 모드(예: 풀 vs. 오픈 워터)를 지원합니다.

### 1.3 로그 및 분석 기능
- **자동/수동 로그**: 다이빙 후 프로필(깊이 곡선, 회복 히트맵)을 기록합니다. 사진/비디오/노트 첨부를 허용합니다. PDF/CSV로 내보내기 가능.
- **개인 통계 대시보드**: 트렌드(예: 최대 깊이 진행, 주간 평균)를 그래프로 표시합니다. 프리미엄: AI 인사이트(예: "회복 10% 줄이면 깊이 2m 향상").
- **데이터 동기화 및 백업**: Watch에서 iPhone으로 원활한 전송. CloudKit를 사용한 클라우드 저장.

### 1.4 커뮤니티/소셜 기능
- **챌린지/랭킹**: 월간 챌린지(예: 최대 홀드 시간)를 호스팅합니다. 지역/레벨별 리더보드를 표시합니다.
- **코치 매칭**: 인증된 코치와 채팅/비디오 연결을 가능하게 합니다. 전문성별 검색/필터 포함.
- **교육 콘텐츠**: 호흡 기술, 장비 가이드 등의 내장 튜토리얼(비디오/기사).

### 1.5 기타 기능적 기능
- **사용자 인증**: Apple ID를 통한 보안 로그인. 스킬 레벨, 목표를 포함한 프로필 설정.
- **구독 관리**: 인앱 구매를 통해 프리미엄 기능(예: 무제한 로그, AI 도구) 구매.
- **데이터 가져오기/내보내기**: Apple HealthKit과 호환되어 심박수/깊이 데이터 가져오기.

모든 기능은 직관적 UI(예: 습한 조건을 위한 큰 폰트, 다크 모드)를 포함합니다. Watch 앱: 기본 사용을 위한 독립형; iPhone: 전체 편집/분석.

---

## 2. 비기능적 요구사항

이 요구사항은 시스템의 성능 방식(사용성, 보안, 유지보수성)을 지정합니다.

### 2.1 사용성
- **사용자 인터페이스**: 직관적이고 최소주의 디자인(SwiftUI). Watch: 제스처 기반(탭/스와이프)과 Siri 음성 명령. iPhone: 터치 최적화와 다이빙 후 사용을 위한 큰 버튼.
- **접근성**: VoiceOver, 고대비 모드, 동적 텍스트 크기 조정을 지원. WCAG 2.1 준수(예: 그래프 대체 텍스트).
- **현지화**: 영어 기본; 2단계에서 주요 언어(스페인어, 프랑스어) 지원.
- **온보딩**: 첫 실행 시 가이드 튜토리얼, 센서 캘리브레이션 포함.

### 2.2 보안 및 프라이버시
- **데이터 보호**: 모든 사용자 데이터(로그, 심박수)를 Apple Keychain으로 암호화. GDPR/CCPA 준수; 위치/건강 데이터에 대한 동의 획득.
- **인증**: 민감 기능(예: SOS 공유)에 생체 인식(Face ID/Touch ID) 사용.
- **감사 로그**: 프리미엄 기능 데이터 접근 추적; 명시적 사용자 허가 없이 공유 금지.
- **취약점 관리**: 정기 보안 감사; HealthKit 권한으로 건강 데이터 처리.

### 2.3 신뢰성 및 유지보수성
- **오류 처리**: 우아한 저하(예: 오프라인 모드 대체). 사용자 친화적 오류 메시지(예: "센서 캘리브레이션 필요").
- **확장성**: 초기 10만 사용자 지원; 커뮤니티 기능에 클라우드 백엔드(Firebase/iCloud).
- **코드 품질**: 모듈러 아키텍처(예: MVVM 패턴). 핵심 기능에 대한 단위/통합 테스트(예: 다이빙 감지 정확도 >95%).
- **업데이트 메커니즘**: App Store를 통한 OTA 업데이트; WatchOS 10+와의 하위 호환성.

### 2.4 호환성
- **플랫폼**: Apple Watch Ultra 2(WatchOS 11+), iPhone(iOS 18+). MVP에서 Android 미지원.
- **통합**: Apple HealthKit, GPS, 센서와 원활 연동. 타사 API(날씨)에 대한 대체 기능 포함.

---

## 3. 성능 요구사항

이 요구사항은 배터리 집약적인 다이빙 사용을 위한 효율성을 보장합니다.

### 3.1 응답 시간
- **실시간 모니터링**: Watch에서 센서 업데이트(깊이/심박수)에 <1초 지연.
- **데이터 동기화**: 다이빙 후 로그 전송(Watch에서 iPhone으로)에 <5초.
- **분석 로딩**: iPhone 대시보드 그래프(100개 로그 기준)에 <3초 로드.

### 3.2 자원 사용
- **배터리 소비**: Watch: 2시간 다이빙 세션당 <20% 소모(스텔스 모드 활성화). 센서 폴링 최적화(예: 깊이 1Hz).
- **저장**: 사용자당 로컬 저장 <500MB(로그 압축); 프리미엄 클라우드 무제한.
- **네트워크**: 최소 데이터 사용(<10MB/세션); 오프라인 우선 설계와 큐 동기화.

### 3.3 처리량 및 용량
- **동시 사용자**: 1,000명 활성 챌린지 처리 시 지연 없음.
- **정확도**: 센서 데이터 >98% 정확(예: 깊이 0.5m 이내, Oceanic+ 기준 테스트).
- **가동 시간**: 클라우드 기능 99.9%; 다이빙 중 앱 크래시 금지(안전 필수).

성능 테스트: Xcode Instruments로 다이빙 시뮬레이션; 경쟁 앱 벤치마킹.

---

## 4. 제약사항

개발 중 고려해야 할 제한사항입니다.

### 4.1 기술 제약
- **하드웨어 한계**: 깊이 모니터링 40m 상한(Apple Watch 센서 제한). MVP에서 비Apple 기기 미지원.
- **API 의존성**: Apple API(HealthKit, Core Motion)에 의존 – 권한 거부 처리. 날씨 API 속도 제한(예: 일일 1,000 호출).
- **개발 도구**: Swift/SwiftUI만 사용; 네이티브 성능을 위한 크로스플랫폼 프레임워크(예: React Native) 금지.

### 4.2 예산 및 일정 제약
- **예산**: 인디 개발자 가정; 무료 도구(Xcode) 우선. 개발 비용을 프리미엄 기능으로 회수.
- **일정**: MVP 3개월; 베타 테스트 1개월. 프리다이빙 기능 외 범위 확대 금지.
- **팀**: 솔로 또는 소규모 팀; 필요 시 UI 디자인 아웃소싱.

### 4.3 규제 및 법적 제약
- **안전 준수**: 앱에 면책 조항 포함(예: "전문 훈련 대체 아님"). AIDA/SSI 표준 준수.
- **App Store 지침**: FDA 승인 없이 건강 주장 금지; 구독 모델 Apple 30% 수수료 준수.
- **데이터 프라이버시**: 건강 데이터 판매/공유 금지; 커뮤니티 랭킹 익명화.

### 4.4 환경 제약
- **사용 맥락**: 방수 테스트 필수; 습한/염분 환경에서 기능 보장.
- **시장**: 초기 App Store 출시(미국/유럽); 사용자 피드백 기반 확장.

이 PRD는 개발 청사진으로 활용됩니다. 다음 단계: 와이어프레임 및 프로토타입. 이해관계자 피드백 기반 검토 및 반복.
